{% extends 'lynx/base.html' %}

{% block content %}

<h1>{{ object.first_name }} {{ object.last_name }}</h1>
<h2>Client Information</h2>
<p class="tab"><strong>Name:</strong> {{ object.first_name }} {% if object.middle_name %}{{ object.middle_name }} {% endif %}{{ object.last_name }}</p>
{% if object.company %}<p class="tab"><strong>Company:</strong> {{ object.company }}</p>{% endif %}
{% if object.deceased %}<p class="tab"><strong>Deceased</strong></p>{% endif %}
<p class="tab"><strong>Services:</strong> {% if object.donor %}Donor, {% endif %}{% if object.sip_client %}SIP Client, {% endif %}
    {% if object.core_client %}Core Client, {% endif %}{% if object.careers_plus %}Careers Plus, {% endif %}
    {% if object.careers_plus_youth %}Careers Plus Youth, {% endif %}{% if object.volunteer %}Volunteer, {% endif %}
    {% if object.access_news %}Access News, {% endif %}{% if object.other_services %} {{object.other_services}} {% endif %}</p>
<p class="tab"><a href="/lynx/contact-edit/{{ object.id }}">Edit Client Information</a></p>
<!--TODO all edits buttons not links-->
{% for address in address_list %}
    {% if not address.bad_address and address.address_one %}
        <p class="tab">
            <strong>Address:</strong><br>
            {{ address.address_one }}<br>
            {% if address.address_two %}{{ address.address_two }}<br>{% endif %}
            {% if address.suite %}Suite {{ address.suite }}<br>{% endif %}
            {{ address.city }}, {{ address.state }} {{ address.zip_code }}<br>
            {{ address.county }}<br>
            {{ address.country }}<br>
            <a href="/lynx/address-edit/{{ address.id }}">(Edit)</a>
        </p>
        {% if address.region %}<p class="tab"><strong>SIR Region:</strong> {{ address.region }}</p>{% endif %}
        {% if address.cross_streets %}<p class="tab"><strong>Cross Streets:</strong> {{ address.cross_streets }}</p>{% endif %}
        {% if address.preferred_medium %}<p class="tab"><strong>Preferred Mailing Medium:</strong> {{ address.preferred_medium }}</p>{% endif %}
        {% if address.address_notes %}<p class="tab"><strong>Notes:</strong> {{ address.address_notes }}</p>{% endif %}
    {% endif %}
{% empty %}
    <p class="tab">Sorry, no associated addresses for this client</p>
{% endfor %}


{% for phone in phone_list %}
    {% if phone.active %}
        <p class="tab">
            <strong>{{ phone.phone_type }} Phone Number:</strong> {{ phone.phone }} <a href="/lynx/phone-edit/{{ phone.id }}">(Edit)</a>
        </p>
    {% endif %}
{% empty %}
    <p class="tab">Sorry, no associated phone numbers for this client</p>
{% endfor %}


{% for email in email_list %}
    {% if email.active %}
        <p class="tab">
            <strong>{{ email.email_type }} Email Address:</strong> {{ email.email }} <a href="/lynx/email-edit/{{ email.id }}">(Edit)</a>
        </p>
    {% endif %}
{% empty %}
    <p class="tab">Sorry, no associated emails for this client</p>
{% endfor %}
<input type="button" onclick="location.href='/lynx/add-address/{{ object.id }}/';" value="Add Address" />
<input type="button" onclick="location.href='/lynx/add-phone/{{ object.id }}/';" value="Add Phone Number" />
<input type="button" onclick="location.href='/lynx/add-email/{{ object.id }}/';" value="Add Email" />

<!--#TODO: dates displayed may 1, 2016 etc-->

<h2>Emergency Contacts</h2>
{% for emergency in emergency_list %}
    <h3 class="tab">{{ emergency.name }}</h3>
    {% if emergency.emergency_address_one %}
        <p class="tab">
            <strong>Address:</strong><br> <!-- #TODO remove address, add links to phone/email tables -->
            {{ emergency.emergency_address_one }}<br>
            {% if emergency.emergency_address_two %}{{ emergency.emergency_address_two }}<br>{% endif %}
            {{ emergency.emergency_city }}, {{ emergency.emergency_state }} {{ emergency.emergency_zip_code }}<br>
            {{ emergency.emergency_country }}
        </p>
    {% endif %}
    {% if emergency.phone_day %}<p class="tab"><strong>Daytime Phone Number:</strong> {{ emergency.phone_day }}</p>{% endif %}
    {% if emergency.phone_other %}<p class="tab"><strong>Other Phone Number:</strong> {{ emergency.phone_other }}</p>{% endif %}
    {% if emergency.email %}<p class="tab"><strong>Email Address:</strong> {{ emergency.emergency_email }}</p>{% endif %}
    <input type="button" onclick="location.href='/lynx/emergency-contact-edit/{{ emergency.id }}';" value="Edit Contact" />
{% empty %}
    <p class="tab">Sorry, no emergency contacts for this client</p>
{% endfor %}
<input type="button" onclick="location.href='/lynx/add-emergency/{{ object.id }}/';" value="Add Emergency Contact" />

<!--#TODO veteran false-->
<h2>Intake Information</h2>
{% for intake in intake_list %}
    <input type="button" onclick="location.href='/lynx/intake-edit/{{ intake.id }}';" value="Edit Intake Information" />
    <p class="tab"><strong>Intake Date:</strong> {{intake.intake_date|date:'m-d-Y'}} </p>
<!--    {% if intake.intake_type %}<p class="tab"><strong>Intake Type:</strong> {{ intake.intake_type }}</p>{% endif %}-->
    <h3>Demographics</h3>
        {% if intake.birth_date %}<p class="tab"><strong>Birth Date:</strong> {{ intake.birth_date|date:'m-d-Y' }}</p>{% endif %}
        {% if intake.age_group %}<p class="tab"><strong>Age Group:</strong> {{ intake.age_group }}</p>{% endif %}
        {% if intake.gender %}<p class="tab"><strong>Gender:</strong> {{ intake.gender }}</p>{% endif %}
        {% if intake.pronouns %}<p class="tab"><strong>Pronouns:</strong> {{ intake.pronouns }}</p>{% endif %}
        {% if intake.ethnicity %}<p class="tab"><strong>Ethnicity:</strong> {{ intake.ethnicity }}{% if intake.other_ethnicity %}, {{ intake.other_ethnicity }}{% endif %}</p>{% endif %}
        {% if intake.first_language %}<p class="tab"><strong>First Language:</strong> {{ intake.first_language }}</p>{% endif %}
        {% if intake.second_language %}<p class="tab"><strong>Second Language:</strong> {{ intake.second_language }}</p>{% endif %}
        {% if intake.other_languages %}<p class="tab"><strong>Other Languages:</strong> {{ intake.other_languages }}</p>{% endif %}
        {% if intake.income %}<p class="tab"><strong>Income:</strong> {{ intake.income }}</p>{% endif %}
        {% if intake.education %}<p class="tab"><strong>Education:</strong> {{ intake.education }}</p>{% endif %}
        {% if intake.living_arrangement %}<p class="tab"><strong>Living Arrangements:</strong> {{ intake.living_arrangement }}</p>{% endif %}
        {% if intake.residence_type %}<p class="tab"><strong>Residence Types:</strong> {{ intake.residence_type }}</p>{% endif %}
        {% if intake.veteran %}<p class="tab"><strong>Veteran:</strong> {{ intake.veteran }}</p>{% endif %}
        {% if intake.hired %}<p class="tab"><strong>Has been hired since training</strong></p>{% else %}<p class="tab"><strong>Has not been hired since training</strong></p>{% endif %}
        {% if intake.employer %}<p class="tab"><strong>Employer:</strong> {{ intake.employer }}</p>{% endif %}
        {% if intake.hire_date %}<p class="tab"><strong>Hire Date: </strong> {{ intake.hire_date|date:'m-d-Y' }}</p>{% endif %}
        {% if intake.position %}<p class="tab"><strong>Position: </strong> {{ intake.position }}</p>{% endif %}
        {% if intake.work_history %}<p class="tab"><strong>Work History:</strong> {{ intake.work_history|linebreaks }}</p>{% endif %}
        {% if intake.notes %}<p class="tab"><strong>Notes:</strong> {{ intake.notes|linebreaks }}</p>{% endif %}
     {% if intake.crime %}<h3>Criminal Background</h3>{% endif %}
        {% if intake.crime %}<p class="tab"><strong>Criminal History:</strong> {{ intake.crime }}</p>{% endif %}
        {% if intake.crime_info %}<p class="tab"><strong>Criminal Details:</strong> {{ intake.crime_info|linebreaks }}</p>{% endif %}
<!--        {% if intake.crime_other %}<p class="tab"><strong>Criminal History (Other):</strong> {{ intake.crime_other|linebreaks }}</p>{% endif %}-->
<!--        {% if intake.parole %}<p class="tab"><strong>Parole:</strong> {{ intake.parole }}</p>{% endif %}-->
<!--        {% if intake.parole_info %}<p class="tab"><strong>Parole Information:</strong> {{ intake.parole_info|linebreaks }}</p>{% endif %}-->
<!--        {% if intake.crime_history %}<p class="tab"><strong>Other Criminal Information:</strong> {{ intake.crime_history|linebreaks }}</p>{% endif %}-->
    <h3>Ocular Medical History</h3>
<!--#TODO date of onset-->
        {% if intake.eye_condition %}<p class="tab"><strong>Eye Condition:</strong> {{ intake.eye_condition }} ({{ intake.eye_condition_date|date:'m-d-Y' }})</p>{% endif %}
        {% if intake.secondary_eye_condition %}<p class="tab"><strong>Notes:</strong> {{ intake.secondary_eye_condition|linebreaks }}</p>{% endif %}
        {% if intake.degree %}<p class="tab"><strong>Degree of Vision Loss:</strong> {{ intake.degree }}</p>{% endif %}
        {% if intake.prognosis %}<p class="tab"><strong>Prognosis:</strong> {{ intake.prognosis }}</p>{% endif %}
        {% if intake.payment_source %}<p class="tab"><strong>Payment:</strong> {{ intake.payment_source }}</p>{% endif %}
        {% if intake.referred_by %}<p class="tab"><strong>Referred By:</strong> {{ intake.referred_by }}</p>{% endif %}
    <h3>Other Medical History</h3>
        <h4>Other Conditions</h4>
        <ul>
            {% if intake.hearing_loss %}<li>Hearing Loss: {{ intake.hearing_loss_notes }} </li>{% endif %}
            {% if intake.mobility %}<li>Mobility: {{ intake.mobility_notes }} </li>{% endif %}
            {% if intake.dexterity %}<li>Use of Hands, Arms, and Fingers: {{ intake.dexterity_notes }} </li>{% endif %}}
            {% if intake.musculoskeletal %}<li>Musculoskeletal Disorders: {{ intake.musculoskeletal_notes }} </li>{% endif %}
            {% if intake.pain %}<li>Pain: {{ intake.pain_notes }} </li>{% endif %}
            {% if intake.arthritis %}<li>Arthritis: {{ intake.arthritis_notes }} </li>{% endif %}
            {% if intake.heart %}<li>Cardiovascular Disease: {{ intake.heart_notes }} </li>{% endif %}
            {% if intake.high_bp %}<li>High BP: {{ intake.high_bp_notes }} </li>{% endif %}
            {% if intake.stroke %}<li>Stroke: {{ intake.stroke_notes }} </li>{% endif %}
            {% if intake.seizure %}<li>Seizure: {{ intake.seizure_notes }} </li>{% endif %}
            {% if intake.migraine %}<li>Migraine Headache: {{ intake.migraine_notes }} </li>{% endif %}
            {% if intake.diabetes %}<li>Diabetes: {{ intake.diabetes_notes }} </li>{% endif %}
            {% if intake.dialysis %}<li>Dialysis: {{ intake.dialysis_notes }} </li>{% endif %}
            {% if intake.neuropathy %}<li>Neuropathy: {{ intake.neuropathy_notes }} </li>{% endif %}
            {% if intake.cancer %}<li>Cancer: {{ intake.cancer_notes }} </li>{% endif %}
            {% if intake.substance_abuse %}<li>Substance Abuse: {{ intake.substance_abuse_notes }} </li>{% endif %}
            {% if intake.memory_loss %}<li>Memory Loss: {{ intake.memory_loss_notes }} </li>{% endif %}
            {% if intake.learning_disability %}<li>Learning Disability: {{ intake.learning_disability_notes }} </li>{% endif %}
            {% if intake.alzheimers %}<li>Alzheimer’s Disease/Cognitive Impairment: {{ intake.alzheimers_notes }} </li>{% endif %}
            {% if intake.asthma %}<li>Asthma: {{ intake.asthma_notes }} </li>{% endif %}
            {% if intake.geriatric %}<li>Other Major Geriatric Concerns: {{ intake.geriatric_notes }} </li>{% endif %}
        </ul>
        {% if intake.allergies %}<p class="tab"><strong>Allergies:</strong> {{ intake.allergies|linebreaks }}</p>{% endif %}
        {% if intake.mental_health %}<p class="tab"><strong>Mental Health:</strong> {{ intake.mental_health|linebreaks }}</p>{% endif %}
        {% if intake.medications %}<p class="tab"><strong>Medications:</strong> {{ intake.medications|linebreaks }}</p>{% endif %}
        {% if intake.medical_notes %}<p class="tab"><strong>Medical Notes:</strong> {{ intake.medical_notes|linebreaks }}</p>{% endif %}

    <h3>Blindness Skills/Other Information</h3>
        {% if intake.performs_tasks %}<p class="tab"><strong>Performs Tasks:</strong> {{ intake.performs_tasks }}</p>{% endif %}
        {% if intake.previous_training %}<p class="tab"><strong>Previous Training:</strong> {{ intake.previous_training|linebreaks }}</p>{% endif %}
        {% if intake.training_goals %}<p class="tab"><strong>Training Goals:</strong> {{ intake.training_goals|linebreaks }}</p>{% endif %}
        {% if intake.training_preferences %}<p class="tab"><strong>Training Preferences:</strong> {{ intake.training_preferences|linebreaks }}</p>{% endif %}
        {% if intake.employment_goals %}<p class="tab"><strong>Employment Goals:</strong> {{ intake.employment_goals|linebreaks }}</p>{% endif %}
        {% if intake.hobbies %}<p class="tab"><strong>Hobbies/Interests:</strong> {{ intake.hobbies|linebreaks }}</p>{% endif %}
        {% if intake.other %}<p class="tab"><strong>Other Notes:</strong> {{ intake.other|linebreaks }}</p>{% endif %}
    <input type="button" onclick="location.href='/lynx/intake-edit/{{ intake.id }}';" value="Edit Intake Information" />
{% empty %}
    <p class="tab">Sorry, no intake information for this client</p>
    <input type="button" onclick="location.href='/lynx/add-intake/{{ object.id }}/';" value="Add Intake Information" />
{% endfor %}

{% if object.core_client %}
    <h2>Authorizations</h2>
    <ul>
        {% for auth in authorization_list %}
            <li><a href='/lynx/authorization/{{ auth.id }}'>{{ auth.intake_service_area }}: {{ auth.start_date|date:'m-d-Y' }}- {{ auth.end_date|date:'m-d-Y' }}. {{ auth.authorization_number }}</a></li>
        {% empty %}
            <li><p class="tab">Sorry, no authorizations for this client</p></li>
        {% endfor %}
    </ul>
    <input type="button" onclick="location.href='/lynx/add-authorization/{{ object.id }}/';" value="Add New Authorization" />
{% endif %}

{% if object.sip_client %}
    <h2>SIP Notes</h2>
    {% for sip in sip_list %}
        <h3 class="tab">{{ sip.note_date|date:'m-d-Y' }}</h3>
            <p class="tab">{{ sip.created|date:'m-d-Y' }}: {{ sip.note|linebreaks }}<br>
              -{{ sip.user.first_name }} {{ sip.user.last_name }} </p> <!-- TODO: add edit button-->
            <p class="tab"><strong>Services: </strong>{% if sip.vision_screening %}Vision screening/examination/low vision evaluation, {% endif %}{% if sip.treatment %}Surgical or therapeutic treatment, {% endif %}{% if sip.at_devices %}AT devices and aids, {% endif %}{% if sip.at_services %}AT Services, {% endif %}{% if sip.independent_living %}ILS, {% endif %}{% if sip.orientation %}O & M, {% endif %}{% if sip.communications %}Communication skills, {% endif %}{% if sip.dls %}DLS, {% endif %}{% if sip.support %}Support services, {% endif %}{% if sip.advocacy %}Advocacy, {% endif %}{% if sip.counseling %}Counseling, {% endif %}{% if sip.information %}I & R, {% endif %}{% if sip.services %}Other IL services{% endif %}</p>
            <p class="tab"><strong>Service Delivery: </strong>{% if sip.retreat %}Retreat, {% endif %}{% if sip.in_home %}In-home Training, {% endif %}{% if sip.seminar %}Training Seminar, {% endif %}{% if sip.modesto %}Modesto training site, {% endif %}{% if sip.group %}Support group(s), {% endif %}{% if sip.community %}Community Integration{% endif %}</p>
    {% empty %}
        <p class="tab">Sorry, no SIP Notes for this client</p>
    {% endfor %}
    <input type="button" onclick="location.href='/lynx/add-sip-note/{{ object.id }}/';" value="Add New SIP Note" />
{% endif %}

<h2>Notes</h2>
{% for note in note_list %}
    <p class="tab">{{ note.created|date:'m-d-Y' }}: {{ note.note|linebreaks }}<br>
        -{{ note.user.first_name }} {{ note.user.last_name }} <a href="/lynx/intake-note-edit/{{ note.id }}">(Edit)</a></p>
{% endfor %}
    {% if object.contact_notes %}
        <p class="tab">{{ object.created|date:'m-d-Y' }}: {{ object.contact_notes|linebreaks }}<br>
            -{{ user.first_name }} {{ user.last_name }} <a href="/lynx/intake-note-edit/{{ note.id }}">(Edit)</a></p>
    {% endif %}
<h3>New Note</h3>
<form action="/lynx/client/{{ object.id }}" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit">
</form>

{% endblock %}